{% load lib-menu %}


{% menuFields as menuField %}
{% menuStations fieldId as menuStation %}

{% if menuField %}
    <h4>Terrains</h4>
    <ul class="nav flex-column">
        <li class="nav-link">
            <i class="la la-map"></i>
            <a href="{% url 'map:index' %}">TOUS</a>
        </li>

        {% for field in menuField %}
        <li class="nav-link">
            <i class="la la-map"></i>
            <a href="{% url 'map:field' field.id_field %}">({{ field.id_field}}){{ field.field_name}}</a>
        </li>
        {% endfor %}
    </ul>
{% else %}
    <p>No fields are availableccc.</p>
{% endif %}



{% if menuStation %}
    <h4>Stations</h4>
    <ul class="nav flex-column">
        {% for station in menuStation %}
        <li class="nav-link l1">
            <i class="la la-object-group"></i>
            <a href="{% url 'map:station' station.fields_id_field station.id_station %}">
                [{{ station.id_station }}] {{ station.station_longname }}
            </a>
            <ul>
                {% for se in station.sondes  %}
                <li class="nav-link l2">
                    <i class="la la-feed"></i>
                    <a href="{% url 'map:sensor' station.fields_id_field station.id_station se.id_sensor %}">
                        {{ se.sensor_longname }}
                    </a>
                </li>
                {% empty %}
                <li class="nav-link l2">
                    Cette station ne contient pas de sondes
                </li>
                {% endfor %}
            </ul>
        </li>
        {% endfor %}
    </ul>
{% else %}
<h4>Stations</h4>
<p>SÃ©lectionner un terrain</p>
{% endif %}